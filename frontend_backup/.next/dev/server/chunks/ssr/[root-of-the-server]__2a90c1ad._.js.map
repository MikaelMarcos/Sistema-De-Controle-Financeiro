{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mikae/Documents/ProjetosdeProgramacao/projeto-financeiro/frontend/app/page.js"],"sourcesContent":["'use client'; \n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst API_URL = 'http://localhost:8000';\n\n// --- NOVO Componente: Card de Resumo ---\nfunction SummaryCard({ title, amount, colorClass }) {\n  const formattedAmount = amount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\n  return (\n    <div className={`bg-gray-800 p-6 rounded-lg shadow-lg`}>\n      <h2 className=\"text-sm font-medium text-gray-400 mb-1\">{title}</h2>\n      <p className={`text-3xl font-bold ${colorClass}`}>{formattedAmount}</p>\n    </div>\n  );\n}\n\n// --- Componente da Lista de Despesas (O mesmo de antes) ---\nfunction ExpenseList({ expenses, setExpenses }) {\n  \n  const handleDelete = (id) => {\n    if (confirm(\"Tem certeza que deseja deletar esta despesa?\")) {\n      axios.delete(`${API_URL}/expenses/${id}`)\n        .then(() => {\n          // Chama a funÃ§Ã£o do pai para atualizar o estado e recalcular\n          axios.get(`${API_URL}/expenses/`).then(res => setExpenses(res.data));\n        })\n        .catch(error => console.error(\"Erro ao deletar despesa:\", error));\n    }\n  };\n\n  // ðŸ‘‡ FUNÃ‡ÃƒO DE FORMATAR DATA ADICIONADA AQUI ðŸ‘‡\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString('pt-BR', { timeZone: 'UTC' });\n  };\n\n  return (\n    <div className=\"bg-gray-800 p-6 rounded-lg shadow-lg\">\n      <h2 className=\"text-2xl font-bold mb-4 text-green-400\">Ãšltimas Despesas</h2>\n      {expenses.length === 0 ? (\n        <p className=\"text-gray-400\">Nenhuma despesa registrada ainda.</p>\n      ) : (\n        <ul className=\"space-y-4\">\n          {expenses.map(expense => (\n            <li key={expense.id} className=\"flex justify-between items-center bg-gray-700 p-4 rounded\">\n              <div>\n                {/* ðŸ‘‡ SPAN DE DATA ADICIONADO AQUI ðŸ‘‡ */}\n                <span className=\"text-xs text-gray-400 block mb-1\">\n                  {formatDate(expense.date)}\n                </span>\n                <span className=\"font-semibold text-lg\">{expense.description}</span>\n                <span className={`text-sm ml-2 px-2 py-0.5 rounded ${expense.category ? 'bg-blue-600' : 'bg-gray-600'}`}>\n                  {expense.category ? expense.category.name : 'Sem Categoria'}\n                </span>\n              </div>\n              <div className=\"flex items-center space-x-4\">\n                <span className=\"font-bold text-red-400 text-lg\">\n                  R$ {expense.amount.toFixed(2)}\n                </span>\n                <button\n                  onClick={() => handleDelete(expense.id)}\n                  className=\"text-gray-400 hover:text-red-500 transition duration-300\"\n                >\n                  &times;\n                </button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\n// --- Card de Metas Personalizado (O mesmo de antes) ---\nfunction GoalsCard() {\n  const metaCasamento = {\n    nome: \"Meta: Casamento\",\n    progresso: 15, // Progresso em % (exemplo)\n    atual: 3000,\n    total: 20000\n  };\n\n  return (\n    <div className=\"bg-gray-800 p-6 rounded-lg shadow-lg h-full\">\n      <h2 className=\"text-2xl font-bold mb-4 text-yellow-400\">Suas Metas</h2>\n      <div>\n        <div className=\"flex justify-between items-center mb-1\">\n          <span className=\"font-semibold text-lg\">{metaCasamento.nome}</span>\n          <span className=\"text-sm font-medium text-yellow-400\">{metaCasamento.progresso}%</span>\n        </div>\n        <div className=\"w-full bg-gray-700 rounded-full h-2.5 mb-2\">\n          <div \n            className=\"bg-yellow-500 h-2.5 rounded-full\" \n            style={{ width: `${metaCasamento.progresso}%` }}\n          ></div>\n        </div>\n        <div className=\"flex justify-between items-center text-sm text-gray-300\">\n          <span>R$ {metaCasamento.atual.toLocaleString('pt-BR')}</span>\n          <span>R$ {metaCasamento.total.toLocaleString('pt-BR')}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n// --- Componente Principal da PÃ¡gina (Dashboard) ---\nexport default function Home() {\n  const [expenses, setExpenses] = useState([]);\n  const [incomes, setIncomes] = useState([]);\n\n  // Estados para os totais\n  const [totalIncome, setTotalIncome] = useState(0);\n  const [totalExpenses, setTotalExpenses] = useState(0);\n  const [balance, setBalance] = useState(0);\n\n  // Busca os dados quando a pÃ¡gina Ã© carregada\n  useEffect(() => {\n    // FunÃ§Ã£o para buscar dados e calcular totais\n    const fetchData = async () => {\n      try {\n        const [expenseRes, incomeRes] = await Promise.all([\n          axios.get(`${API_URL}/expenses/`),\n          axios.get(`${API_URL}/income/`)\n        ]);\n\n        const expensesData = expenseRes.data;\n        const incomesData = incomeRes.data;\n\n        setExpenses(expensesData);\n        setIncomes(incomesData);\n\n        // Calcula Totais\n        const totalInc = incomesData.reduce((acc, income) => acc + income.amount, 0);\n        const totalExp = expensesData.reduce((acc, expense) => acc + expense.amount, 0);\n        \n        setTotalIncome(totalInc);\n        setTotalExpenses(totalExp);\n        setBalance(totalInc - totalExp);\n\n      } catch (error) {\n        console.error(\"Erro ao buscar dados do dashboard:\", error);\n      }\n    };\n\n    fetchData();\n  }, []); \n\n  // FunÃ§Ã£o para atualizar a lista de despesas (caso seja deletada)\n  const handleSetExpenses = (newExpenses) => {\n    setExpenses(newExpenses);\n    // Recalcula totais\n    const totalExp = newExpenses.reduce((acc, expense) => acc + expense.amount, 0);\n    setTotalExpenses(totalExp);\n    setBalance(totalIncome - totalExp);\n  };\n\n  return (\n    <div>\n      {/* Grid de Resumo */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        <SummaryCard \n          title=\"Total Entradas\" \n          amount={totalIncome} \n          colorClass=\"text-green-400\"\n        />\n        <SummaryCard \n          title=\"Total Despesas\" \n          amount={totalExpenses} \n          colorClass=\"text-red-400\"\n        />\n        <SummaryCard \n          title=\"BalanÃ§o Atual\" \n          amount={balance} \n          colorClass={balance >= 0 ? \"text-blue-400\" : \"text-red-500\"}\n        />\n      </div>\n\n      {/* Layout em duas colunas: Despesas e Metas */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2\">\n          <ExpenseList expenses={expenses} setExpenses={handleSetExpenses} />\n        </div>\n        <div className=\"lg:col-span-1\">\n          <GoalsCard />\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}