{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mikae/Documents/ProjetosdeProgramacao/projeto-financeiro/frontend/app/login/page.js"],"sourcesContent":["'use client';\r\nimport { useState } from 'react';\r\nimport { AuthProvider, useAuth } from '@/context/AuthContext';\r\n\r\nfunction LoginForm() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isRegistering, setIsRegistering] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(''); // Para mensagem de sucesso\r\n  const { login, register } = useAuth();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    try {\r\n      if (isRegistering) {\r\n        // --- ETAPA DE REGISTRO ---\r\n        await register(email, password);\r\n        setSuccess(\"Conta criada com sucesso! Por favor, faça o login.\");\r\n        setIsRegistering(false); // Volta para a tela de login\r\n      } else {\r\n        // --- ETAPA DE LOGIN ---\r\n        await login(email, password);\r\n        // O login já redireciona se for bem-sucedido\r\n      }\r\n    } catch (err) {\r\n      // Pega a mensagem de erro específica do backend\r\n      if (err.response && err.response.data && err.response.data.detail) {\r\n        setError(err.response.data.detail);\r\n      } else {\r\n        setError('Ocorreu um erro. Tente novamente.');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-fin-dark via-fin-card to-fin-dark p-4\">\r\n      <div className=\"w-full max-w-md bg-fin-dark/80 p-8 rounded-2xl shadow-2xl border border-fin-gold/20 backdrop-blur-md\">\r\n        <h1 className=\"text-3xl font-bold text-center text-white mb-2\">\r\n          Fin<span className=\"text-fin-gold\">anceiro</span>\r\n        </h1>\r\n        <p className=\"text-center text-gray-400 mb-8\">\r\n          {isRegistering ? \"Crie sua conta para começar\" : \"Bem-vindo de volta!\"}\r\n        </p>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-white/80 mb-2\">Email</label>\r\n            <input \r\n              type=\"email\" \r\n              value={email} \r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n              className=\"w-full p-4 bg-fin-dark/60 rounded-xl border-2 border-white/10 focus:border-fin-gold text-white\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-white/80 mb-2\">Senha</label>\r\n            <input \r\n              type=\"password\" \r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n              className=\"w-full p-4 bg-fin-dark/60 rounded-xl border-2 border-white/10 focus:border-fin-gold text-white\"\r\n            />\r\n          </div>\r\n\r\n          {/* Mensagem de Erro (Ex: \"Usuário já existe\") */}\r\n          {error && (\r\n            <p className=\"text-sm text-fin-red bg-fin-red/10 p-3 rounded-lg\">{error}</p>\r\n          )}\r\n\r\n          {/* Mensagem de Sucesso (Ex: \"Conta criada!\") */}\r\n          {success && (\r\n            <p className=\"text-sm text-green-400 bg-green-500/10 p-3 rounded-lg\">{success}</p>\r\n          )}\r\n\r\n          <button \r\n            type=\"submit\" \r\n            className=\"w-full bg-gradient-to-r from-fin-highlight to-fin-gold hover:opacity-90 text-fin-dark font-bold py-3 px-4 rounded-xl transition-all shadow-lg\"\r\n          >\r\n            {isRegistering ? 'Registrar' : 'Entrar'}\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"text-center text-sm text-gray-400 mt-6\">\r\n          {isRegistering ? \"Já tem uma conta?\" : \"Não tem uma conta?\"}\r\n          <button \r\n            onClick={() => {\r\n              setIsRegistering(!isRegistering);\r\n              setError('');\r\n              setSuccess('');\r\n            }}\r\n            className=\"font-medium text-fin-gold hover:underline ml-1\"\r\n          >\r\n            {isRegistering ? 'Faça o login' : 'Registre-se'}\r\n          </button>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function LoginPage() {\r\n  return (\r\n    <AuthProvider>\r\n      <LoginForm />\r\n    </AuthProvider>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIA,SAAS;IACP,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,4RAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,4RAAQ,EAAC;IACzC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,4RAAQ,EAAC;IACnD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,4RAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4RAAQ,EAAC,KAAK,2BAA2B;IACvE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,4MAAO;IAEnC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QAEX,IAAI;YACF,IAAI,eAAe;gBACjB,4BAA4B;gBAC5B,MAAM,SAAS,OAAO;gBACtB,WAAW;gBACX,iBAAiB,QAAQ,6BAA6B;YACxD,OAAO;gBACL,yBAAyB;gBACzB,MAAM,MAAM,OAAO;YACnB,6CAA6C;YAC/C;QACF,EAAE,OAAO,KAAK;YACZ,gDAAgD;YAChD,IAAI,IAAI,QAAQ,IAAI,IAAI,QAAQ,CAAC,IAAI,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE;gBACjE,SAAS,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM;YACnC,OAAO;gBACL,SAAS;YACX;QACF;IACF;IAEA,qBACE,yTAAC;QAAI,WAAU;kBACb,cAAA,yTAAC;YAAI,WAAU;;8BACb,yTAAC;oBAAG,WAAU;;wBAAiD;sCAC1D,yTAAC;4BAAK,WAAU;sCAAgB;;;;;;;;;;;;8BAErC,yTAAC;oBAAE,WAAU;8BACV,gBAAgB,gCAAgC;;;;;;8BAGnD,yTAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,yTAAC;;8CACC,yTAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAChE,yTAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAGd,yTAAC;;8CACC,yTAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAChE,yTAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,QAAQ;oCACR,WAAU;;;;;;;;;;;;wBAKb,uBACC,yTAAC;4BAAE,WAAU;sCAAqD;;;;;;wBAInE,yBACC,yTAAC;4BAAE,WAAU;sCAAyD;;;;;;sCAGxE,yTAAC;4BACC,MAAK;4BACL,WAAU;sCAET,gBAAgB,cAAc;;;;;;;;;;;;8BAInC,yTAAC;oBAAE,WAAU;;wBACV,gBAAgB,sBAAsB;sCACvC,yTAAC;4BACC,SAAS;gCACP,iBAAiB,CAAC;gCAClB,SAAS;gCACT,WAAW;4BACb;4BACA,WAAU;sCAET,gBAAgB,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAM9C;AAEe,SAAS;IACtB,qBACE,yTAAC,iNAAY;kBACX,cAAA,yTAAC;;;;;;;;;;AAGP","debugId":null}}]
}