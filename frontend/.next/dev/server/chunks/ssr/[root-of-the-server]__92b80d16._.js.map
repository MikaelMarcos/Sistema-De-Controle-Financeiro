{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mikae/Documents/ProjetosdeProgramacao/projeto-financeiro/frontend/app/income/page.js"],"sourcesContent":["'use client'; \r\n\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:8000';\r\n\r\n// --- Componente do Formulário de Entradas ---\r\nfunction IncomeForm({ onIncomeAdded }) {\r\n  const [description, setDescription] = useState('');\r\n  const [amount, setAmount] = useState('');\r\n  const [date, setDate] = useState(''); // Estado para data\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!description || !amount) {\r\n      alert(\"Por favor, preencha todos os campos.\");\r\n      return;\r\n    }\r\n\r\n    const newIncome = {\r\n      description: description,\r\n      amount: parseFloat(amount),\r\n    };\r\n\r\n    // Adiciona a data ao objeto APENAS se ela foi preenchida\r\n    if (date) {\r\n      newIncome.date = new Date(date).toISOString();\r\n    }\r\n\r\n    axios.post(`${API_URL}/income/`, newIncome)\r\n      .then(response => {\r\n        setDescription('');\r\n        setAmount('');\r\n        setDate(''); // Limpa o campo de data\r\n        onIncomeAdded(response.data);\r\n      })\r\n      .catch(error => console.error(\"Erro ao adicionar entrada:\", error));\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"bg-gray-800 p-6 rounded-lg shadow-lg mb-8\">\r\n      <h2 className=\"text-2xl font-bold mb-4 text-green-400\">Nova Entrada (Receita)</h2>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <input\r\n          type=\"text\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n          placeholder=\"Descrição (ex: Salário - LAIS)\"\r\n          className=\"p-3 bg-gray-700 rounded border border-gray-600 focus:outline-none focus:border-green-500\"\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          placeholder=\"Valor (ex: 3000.00)\"\r\n          className=\"p-3 bg-gray-700 rounded border border-gray-600 focus:outline-none focus:border-green-500\"\r\n        />\r\n        {/* Campo de Data */}\r\n        <input\r\n          type=\"date\"\r\n          value={date}\r\n          onChange={(e) => setDate(e.target.value)}\r\n          className=\"p-3 bg-gray-700 rounded border border-gray-600 focus:outline-none focus:border-green-500\"\r\n        />\r\n      </div>\r\n      <button type=\"submit\" className=\"mt-4 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded transition duration-300\">\r\n        Adicionar Entrada\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\n// --- Componente da Lista de Entradas ---\r\nfunction IncomeList({ incomes, setIncomes }) {\r\n  \r\n  const handleDelete = (id) => {\r\n    if (confirm(\"Tem certeza que deseja deletar esta entrada?\")) {\r\n      axios.delete(`${API_URL}/income/${id}`)\r\n        .then(() => {\r\n          setIncomes(incomes.filter(inc => inc.id !== id));\r\n        })\r\n        .catch(error => console.error(\"Erro ao deletar entrada:\", error));\r\n    }\r\n  };\r\n\r\n  // Função para formatar a data\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('pt-BR', { timeZone: 'UTC' });\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-800 p-6 rounded-lg shadow-lg\">\r\n      <h2 className=\"text-2xl font-bold mb-4 text-green-400\">Últimas Entradas</h2>\r\n      {incomes.length === 0 ? (\r\n        <p className=\"text-gray-400\">Nenhuma entrada registrada ainda.</p>\r\n      ) : (\r\n        <ul className=\"space-y-4\">\r\n          {incomes.map(income => (\r\n            <li key={income.id} className=\"flex justify-between items-center bg-gray-700 p-4 rounded\">\r\n              <div>\r\n                {/* Span de Data */}\r\n                <span className=\"text-xs text-gray-400 block mb-1\">\r\n                  {formatDate(income.date)}\r\n                </span>\r\n                <span className=\"font-semibold text-lg\">{income.description}</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-4\">\r\n                <span className=\"font-bold text-green-400 text-lg\">\r\n                  + R$ {income.amount.toFixed(2)}\r\n                </span>\r\n                <button\r\n                  onClick={() => handleDelete(income.id)}\r\n                  className=\"text-gray-400 hover:text-red-500 transition duration-300\"\r\n                >\r\n                  &times;\r\n                </button>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// --- Componente Principal da Página ---\r\nexport default function IncomePage() {\r\n  const [incomes, setIncomes] = useState([]);\r\n\r\n  useEffect(() => {\r\n    axios.get(`${API_URL}/income/`)\r\n      .then(response => {\r\n        setIncomes(response.data);\r\n      })\r\n      .catch(error => console.error(\"Erro ao buscar entradas:\", error));\r\n  }, []);\r\n\r\n  const handleNewIncome = (newIncome) => {\r\n    // Adiciona a nova entrada no topo da lista\r\n    setIncomes(prevIncomes => [newIncome, ...prevIncomes]);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IncomeForm onIncomeAdded={handleNewIncome} />\r\n      <IncomeList incomes={incomes} setIncomes={setIncomes} />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}