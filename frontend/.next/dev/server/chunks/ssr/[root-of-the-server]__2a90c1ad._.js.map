{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mikae/Documents/ProjetosdeProgramacao/projeto-financeiro/frontend/app/page.js"],"sourcesContent":["'use client'; \n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst API_URL = 'http://localhost:8000';\n\n// --- Seletor de MÃªs Estilizado ---\nfunction MonthSelector({ currentDate, onDateChange }) {\n  const handlePreviousMonth = () => {\n    const newDate = new Date(currentDate);\n    newDate.setMonth(newDate.getMonth() - 1);\n    onDateChange(newDate);\n  };\n  const handleNextMonth = () => {\n    const newDate = new Date(currentDate);\n    newDate.setMonth(newDate.getMonth() + 1);\n    onDateChange(newDate);\n  };\n  const formattedDate = currentDate.toLocaleString('pt-BR', { month: 'long', year: 'numeric' }).replace(/^\\w/, (c) => c.toUpperCase());\n\n  return (\n    <div className=\"flex justify-between items-center mb-8\">\n      <button onClick={handlePreviousMonth} className=\"p-2 text-fin-gold hover:bg-fin-card rounded-full transition-colors\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={2} stroke=\"currentColor\" className=\"w-6 h-6\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.75 19.5L8.25 12l7.5-7.5\" />\n        </svg>\n      </button>\n      <h2 className=\"text-3xl font-light text-white tracking-wide\">{formattedDate}</h2>\n      <button onClick={handleNextMonth} className=\"p-2 text-fin-gold hover:bg-fin-card rounded-full transition-colors\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={2} stroke=\"currentColor\" className=\"w-6 h-6\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8.25 4.5l7.5 7.5-7.5 7.5\" />\n        </svg>\n      </button>\n    </div>\n  );\n}\n\n// --- Card de Resumo com novas cores ---\nfunction SummaryCard({ title, amount, type }) {\n  const formattedAmount = amount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });\n  \n  let colorClass = \"text-white\";\n  if (type === 'income') colorClass = \"text-fin-gold\"; // Dourado para Entradas\n  if (type === 'expense') colorClass = \"text-fin-red\"; // Vermelho terra para Despesas\n  if (type === 'balance') colorClass = amount >= 0 ? \"text-fin-highlight\" : \"text-fin-red\";\n\n  return (\n    <div className=\"bg-fin-card/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white/5\">\n      <h2 className=\"text-sm font-medium text-gray-300 mb-2 uppercase tracking-wider\">{title}</h2>\n      <p className={`text-3xl font-bold ${colorClass}`}>{formattedAmount}</p>\n    </div>\n  );\n}\n\n// --- Lista de Despesas Modernizada ---\nfunction ExpenseList({ expenses, onExpenseDeleted }) {\n  const handleDelete = (id) => {\n    if (confirm(\"Tem certeza que deseja deletar esta despesa?\")) {\n      axios.delete(`${API_URL}/expenses/${id}`).then(() => onExpenseDeleted()).catch(e => console.error(e));\n    }\n  };\n  const formatDate = (d) => new Date(d).toLocaleDateString('pt-BR', { timeZone: 'UTC' });\n\n  return (\n    <div className=\"bg-fin-card/50 p-6 rounded-2xl border border-white/5\">\n      <h2 className=\"text-xl font-semibold mb-6 text-fin-terra\">Ãšltimas MovimentaÃ§Ãµes</h2>\n      {expenses.length === 0 ? (\n        <p className=\"text-gray-400 font-light italic\">Nenhuma despesa neste mÃªs.</p>\n      ) : (\n        <ul className=\"space-y-3\">\n          {expenses.map(expense => (\n            <li key={expense.id} className=\"flex justify-between items-center bg-fin-dark/40 p-4 rounded-xl hover:bg-fin-dark/60 transition-all border border-white/5\">\n              <div>\n                <div className=\"flex items-center gap-2 mb-1\">\n                   <span className=\"text-xs text-gray-400\">{formatDate(expense.date)}</span>\n                   {expense.goal && <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-fin-highlight/20 text-fin-highlight font-bold\">Meta: {expense.goal.name}</span>}\n                </div>\n                <span className=\"font-medium text-white\">{expense.description}</span>\n                <span className=\"text-sm ml-2 text-fin-gold/80\">\n                  {expense.budget_group?.name} {expense.category ? `â†’ ${expense.category.name}` : ''}\n                </span>\n              </div>\n              <div className=\"flex items-center gap-4\">\n                <span className=\"font-bold text-fin-red\">- R$ {expense.amount.toFixed(2)}</span>\n                <button onClick={() => handleDelete(expense.id)} className=\"text-fin-red/50 hover:text-fin-red transition-colors text-xl\">&times;</button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\n// --- Card de Meta Destaque ---\nfunction GoalsCard({ goals }) {\n  const featuredGoal = goals.length > 0 ? goals[0] : null;\n  if (!featuredGoal) return <div className=\"bg-fin-card/50 p-6 rounded-2xl border border-white/5 text-gray-400\">Sem metas ativas.</div>;\n\n  const { name, current_amount, target_amount } = featuredGoal;\n  const progress = target_amount > 0 ? (current_amount / target_amount) * 100 : 0;\n\n  return (\n    <div className=\"bg-gradient-to-br from-fin-card to-fin-dark p-6 rounded-2xl shadow-xl border border-fin-gold/20 h-full relative overflow-hidden\">\n      {/* Efeito de brilho no fundo */}\n      <div className=\"absolute top-0 right-0 -mt-8 -mr-8 w-32 h-32 bg-fin-gold/10 rounded-full blur-3xl\"></div>\n      \n      <h2 className=\"text-xl font-bold mb-6 text-fin-highlight flex items-center gap-2\">\n        ðŸŽ¯ Foco Principal\n      </h2>\n      <div>\n        <div className=\"flex justify-between items-baseline mb-2\">\n          <span className=\"font-semibold text-2xl text-white\">{name}</span>\n          <span className=\"text-lg font-bold text-fin-highlight\">{progress.toFixed(0)}%</span>\n        </div>\n        <div className=\"w-full bg-fin-dark rounded-full h-4 mb-4 p-0.5 border border-white/10\">\n          <div className=\"bg-gradient-to-r from-fin-gold to-fin-highlight h-full rounded-full shadow-[0_0_10px_rgba(242,171,109,0.5)]\" style={{ width: `${progress}%` }}></div>\n        </div>\n        <div className=\"flex justify-between items-center text-sm text-gray-300\">\n          <span>Atual: <strong className=\"text-white\">R$ {current_amount.toLocaleString('pt-BR')}</strong></span>\n          <span>Alvo: <strong className=\"text-white\">R$ {target_amount.toLocaleString('pt-BR')}</strong></span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function Home() {\n  const [expenses, setExpenses] = useState([]);\n  const [goals, setGoals] = useState([]);\n  const [totalIncome, setTotalIncome] = useState(0);\n  const [totalExpenses, setTotalExpenses] = useState(0);\n  const [balance, setBalance] = useState(0);\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [lastUpdate, setLastUpdate] = useState(new Date());\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const month = currentDate.getMonth() + 1;\n      const year = currentDate.getFullYear();\n      try {\n        const [expenseRes, incomeRes, goalsRes] = await Promise.all([\n          axios.get(`${API_URL}/expenses/?year=${year}&month=${month}`),\n          axios.get(`${API_URL}/income/?year=${year}&month=${month}`),\n          axios.get(`${API_URL}/goals/`)\n        ]);\n        setExpenses(expenseRes.data);\n        setGoals(goalsRes.data);\n        const tInc = incomeRes.data.reduce((acc, i) => acc + i.amount, 0);\n        const tExp = expenseRes.data.reduce((acc, e) => acc + e.amount, 0);\n        setTotalIncome(tInc);\n        setTotalExpenses(tExp);\n        setBalance(tInc - tExp);\n      } catch (error) { console.error(\"Erro:\", error); }\n    };\n    fetchData();\n  }, [currentDate, lastUpdate]);\n\n  return (\n    <div>\n      <MonthSelector currentDate={currentDate} onDateChange={setCurrentDate} />\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        <SummaryCard title=\"Entradas\" amount={totalIncome} type=\"income\" />\n        <SummaryCard title=\"SaÃ­das\" amount={totalExpenses} type=\"expense\" />\n        <SummaryCard title=\"BalanÃ§o\" amount={balance} type=\"balance\" />\n      </div>\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2\">\n          <ExpenseList expenses={expenses} onExpenseDeleted={() => setLastUpdate(new Date())} />\n        </div>\n        <div className=\"lg:col-span-1\">\n          <GoalsCard goals={goals} />\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}